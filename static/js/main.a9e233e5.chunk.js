(this.webpackJsonpfirst=this.webpackJsonpfirst||[]).push([[0],{32:function(e,t,n){e.exports=n(72)},37:function(e,t,n){},69:function(e,t){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),l=n.n(o),c=(n(37),n(1));function i(e){var t=e.onGameJoined,n=e.onGameStarted,o=e.error,l=e.loading,i=Object(a.useState)(""),s=Object(c.a)(i,2),u=s[0],d=s[1];return r.a.createElement("div",{className:"flex  align-middle content-center   "},r.a.createElement("div",{className:"mx-auto mt-20 justify-between flex flex-col text-center shadow-xl bg-gray-800 w-full max-w-sm h-96 p-8 "},l?r.a.createElement("div",{className:"m-auto text-blue-700 font-semibold"}," Loading... "):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"m-auto"},r.a.createElement("span",{className:"  font-semibold text-lg pb-4"},"Select number of players to Start New Game"),r.a.createElement("div",{className:"flex align-middle justify-center w-full "},[2,3,4].map((function(e){return r.a.createElement(m,{key:e,number:e,onClick:function(){return n(e)}})})))),r.a.createElement("span",{className:"p-4 font-semibold "},"Have a Room Id?",r.a.createElement("br",null),"Enter Room Id and then hit Join Room"),r.a.createElement("form",{className:"w-full max-w-sm"},r.a.createElement("div",{className:"flex items-center border-b border-blue-500 py-2 "},r.a.createElement("input",{className:"appearance-none bg-transparent border-none w-full text-gray-200 mr-3 py-1 px-2 leading-tight focus:outline-none focus:font-semibold",type:"text",placeholder:"Enter Room Name","aria-label":"Room to Join",value:u,onChange:function(e){return d(e.target.value)}}),r.a.createElement("button",{className:"flex-shrink-0 bg-blue-500 hover:bg-blue-700 border-blue-500 hover:border-blue-700 text-sm border-4 text-white disabled:opacity-50 py-1 px-2 rounded",type:"button",disabled:0===u.length,onClick:function(){return t(u)}},"Join Room")))),o&&r.a.createElement("div",{className:"m-auto text-red-500 text-lg font-semibold"},o)))}function m(e){var t=e.number,n=e.onClick;return r.a.createElement("button",{key:t,onClick:function(){return n()},className:"mx-3 my-4 p-4 flex hover:bg-blue-700    bg-blue-500 max-w-sm w-20 h-20 align-middle content-center text-center shadow-md rounded"},t," players")}var s="https://ludo-galaxy.herokuapp.com/",u="diceRoll.mp3",d=n(31),f=n.n(d);function b(e,t){!function(e,t){var n=p().play;t.on("game_event",(function(t){var a=t.type,r=t.data;switch(n(),a){case"roll_dice":n(),e.ports.diceRolledReceiver.send(r);break;case"move_coins":e.ports.moveCoinsReceiver.send(r)}}))}(e,t),function(e,t){var n=p().play;e.ports.rollDice.subscribe((function(){var a=Math.floor(6*Math.random())+1;n(),e.ports.diceRolledReceiver.send(a),t.emit("game_event",{type:"roll_dice",data:a})})),e.ports.moveCoins.subscribe((function(a){n(),t.emit("game_event",{type:"move_coins",data:a}),e.ports.moveCoinsReceiver.send(a)}))}(e,t)}function p(){var e=new Audio(u);return{play:function(){return e.play()},stop:function(){return e.pause()}}}function v(){var e=r.a.useRef(null),t=function(e){var t=Object(a.useState)((function(){return f()(s)})),n=Object(c.a)(t,1)[0],r=Object(a.useState)(!1),o=Object(c.a)(r,2),l=o[0],i=o[1],m=Object(a.useState)(""),u=Object(c.a)(m,2),d=u[0],p=u[1],v=Object(a.useState)([]),x=Object(c.a)(v,2),g=x[0],y=x[1],h=Object(a.useState)(void 0),E=Object(c.a)(h,2),w=E[0],j=E[1];return n.on("update_room",(function(e){y(e.players)})),{startOnlineGame:function(t){i(!0),n.emit("create_room",{maxPlayers:t},(function(a){i(!1),a.error?p(a.error):(b(e,n),e.ports.newGameReceiver.send([a.roomName,t]),y(a.players),j(a.roomName))}))},joinOnlineGame:function(t){i(!0),n.emit("join_room",{roomName:t},(function(a){i(!1),a.error?p(a.error):(b(e,n),y(a.players),j(t),e.ports.joinGameReceiver.send([t,a.order,a.maxPlayers]))}))},waiting:l,error:d,players:g,room:w}}(function(e){var t=Object(a.useState)(void 0),n=Object(c.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){if(e.current){var t=window.Elm.Game.init({node:e.current});o(t)}}),[e]),r}(e)),n=t.joinOnlineGame,o=t.startOnlineGame,l=t.waiting,m=t.error,u=t.players,d=t.room,p=0!==u.length&&u.every((function(e){return e.isJoined}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{hidden:!p},r.a.createElement("div",{ref:e})),u.length?p?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex  align-middle content-center   "},r.a.createElement("div",{className:"mx-auto mt-20 justify-evenly flex flex-col text-center shadow-xl bg-gray-800 w-full max-w-sm h-96 p-8 "},r.a.createElement("div",{className:"text-gray-300"},"Waiting for other players to join this game"),r.a.createElement("div",{className:"font-semibold text-2xl text-white"},"Room ",d),r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-wrap p-2 justify-center  items-center text-center"},u.map((function(e){return r.a.createElement("div",{key:e.order,className:" hover:bg-blue-700 px-4   bg-blue-500 max-w-sm w-20 h-20 m-2 flex shadow-md rounded justify-center  items-center text-center"},r.a.createElement("div",null,e.isJoined?"Player ".concat(e.order," Joined"):"Waiting..."))})))))):r.a.createElement(i,{onGameJoined:n,onGameStarted:o,loading:l,error:m}))}var x=function(){return r.a.createElement(v,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.a9e233e5.chunk.js.map